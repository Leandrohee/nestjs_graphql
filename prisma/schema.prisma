generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
  schemas = ["nest"]
}

model tb_user {
  cod_user        Int @id @default(autoincrement())
  email           String @unique
  firstName       String 
  lastName        String?
  hash            String
  created_at      DateTime @db.Timestamptz @default(dbgenerated("now()"))
  updated_at      DateTime @db.Timestamptz @default(dbgenerated("now()"))
  is_deleted      Boolean @default(false)
  deleted_at      DateTime? 

  //Relações
  rf_notes        tb_note[]
  rf_posts        tb_post[]

  @@schema("nest")
}


model tb_note {
  cod_note        Int @id @default(autoincrement())
  title           String 
  content         String
  created_at      DateTime @db.Timestamptz @default(dbgenerated("now()"))
  updated_at      DateTime @db.Timestamptz
  is_deleted      Boolean @default(false)
  deleted_at      DateTime?
  cod_user        Int

  //Relações
  rf_user         tb_user @relation(fields: [cod_user], references: [cod_user])

  @@schema("nest")
}

model tb_post {
  cod_post      Int @id @default(autoincrement())
  cod_user      Int
  content       String
  created_at    DateTime @db.Timestamptz @default(dbgenerated("now()"))
  updated_at    DateTime @db.Timestamptz
  is_deleted    Boolean @default(false)
  deleted_at    DateTime?

  //Relações
  rf_user       tb_user @relation(fields: [cod_user], references: [cod_user])

  @@schema("nest")
}